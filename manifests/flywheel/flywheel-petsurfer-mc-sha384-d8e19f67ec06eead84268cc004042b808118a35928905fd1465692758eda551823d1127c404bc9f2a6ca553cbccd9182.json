{
  "gear": {
    "author": "Flywheel, Inc",
    "cite": "https://surfer.nmr.mgh.harvard.edu/fswiki/PetSurfer",
    "command": "python run.py",
    "config": {
      "debug": {
        "default": false,
        "description": "Log debug messages",
        "type": "boolean"
      },
      "freesurfer_license_key": {
        "description": "Text from license file generated during FreeSurfer registration. *Entries should be space separated*",
        "type": "string",
        "optional": true
      },
      "template_creation": {
        "default": "mean",
        "enum": [
          "single_frame",
          "mean"
        ],
        "description": "Select a method for PET template creation that will be used as target image for motion correction of PET dynamic volumes. The template can be generated by extracting a single frame ('sinlge_frame') or averaging all the time frames together ('mean').",
        "type": "string"
      },
      "ref_frame": {
        "default": "0",
        "description": "If your PET data only has one frame (eg, an uptake image), then that will be your template. If your PET data has multiple frames (ie, dynamic), then you will need to create the template from the dynamic data. This can be done by extracting a single frame.",
        "type": "string"
      }
    },
    "description": "Motion correction of PET volumes (Petsurfer pipeline).",
    "environment": {
      "PATH": "/opt/miniconda-latest/bin:/opt/freesurfer/bin:/opt/freesurfer/fsfast/bin:/opt/freesurfer/tktools:/opt/freesurfer/mni/bin:/usr/lib/fsl/5.0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
      "LANG": "C.UTF-8",
      "GPG_KEY": "A035C8C19219BA821ECEA86B64E628F8D684696D",
      "PYTHON_VERSION": "3.10.11",
      "PYTHON_PIP_VERSION": "23.0.1",
      "PYTHON_SETUPTOOLS_VERSION": "65.5.1",
      "PYTHON_GET_PIP_URL": "https://github.com/pypa/get-pip/raw/d5cb0afaf23b8520f1bbcfed521017b4a95f5c01/public/get-pip.py",
      "PYTHON_GET_PIP_SHA256": "394be00f13fa1b9aaa47e911bdb59a09c3b2986472130f30aa0bfaf7f3980637",
      "OS": "Linux",
      "FS_OVERRIDE": "0",
      "SUBJECTS_DIR": "/opt/freesurfer/subjects",
      "FSF_OUTPUT_FORMAT": "nii.gz",
      "MNI_DIR": "/opt/freesurfer/mni",
      "LOCAL_DIR": "/opt/freesurfer/local",
      "FREESURFER_HOME": "/opt/freesurfer",
      "FSFAST_HOME": "/opt/freesurfer/fsfast",
      "MINC_BIN_DIR": "/opt/freesurfer/mni/bin",
      "MINC_LIB_DIR": "/opt/freesurfer/mni/lib",
      "MNI_DATAPATH": "/opt/freesurfer/mni/data",
      "FMRI_ANALYSIS_DIR": "/opt/freesurfer/fsfast",
      "PERL5LIB": "/opt/freesurfer/mni/share/perl5",
      "MNI_PERL5LIB": "/opt/freesurfer/mni/share/perl5/",
      "FLYWHEEL": "/flywheel/v0",
      "FS_LICENSE": "/opt/freesurfer/license.txt",
      "DEBIAN_FRONTEND": "noninteractive",
      "DEBCONF_NOWARNINGS": "yes"
    },
    "custom": {
      "gear-builder": {
        "image": "flywheel/petsurfer-mc:0.1.1_7.3.2",
        "category": "analysis"
      },
      "flywheel": {
        "show-job": true,
        "suite": "Petsurfer"
      }
    },
    "inputs": {
      "api-key": {
        "base": "api-key",
        "read-only": true
      },
      "freesurfer_license_file": {
        "description": "FreeSurfer license file, provided during registration with FreeSurfer. This file will be copied to the $FSHOME directory and used during execution of the Gear.",
        "base": "file",
        "optional": true
      },
      "input-file": {
        "base": "file",
        "optional": false,
        "type": {
          "enum": [
            "nifti"
          ]
        },
        "description": "Input NIfTI file for the Motion correction"
      }
    },
    "label": "Petsurfer motion correction",
    "name": "petsurfer-mc",
    "source": "https://gitlab.com/flywheel-io/flywheel-apps/petsurfer-mc",
    "url": "https://gitlab.com/flywheel-io/flywheel-apps/petsurfer-mc",
    "maintainer": "Flywheel <support@flywheel.io>",
    "license": "Other",
    "version": "0.1.1_7.3.2"
  },
  "exchange": {
    "git-commit": "c01f73e9518c916e8589248bfa2c8063dd5ac616",
    "rootfs-hash": "sha384:d8e19f67ec06eead84268cc004042b808118a35928905fd1465692758eda551823d1127c404bc9f2a6ca553cbccd9182",
    "rootfs-url": "https://storage.googleapis.com/flywheel-exchange/flywheel-petsurfer-mc-sha384-d8e19f67ec06eead84268cc004042b808118a35928905fd1465692758eda551823d1127c404bc9f2a6ca553cbccd9182.tgz"
  },
  "invocation-schema": {
    "title": "Invocation manifest for Petsurfer motion correction",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "properties": {
      "config": {
        "type": "object",
        "properties": {
          "debug": {
            "default": false,
            "type": "boolean"
          },
          "freesurfer_license_key": {
            "type": "string"
          },
          "template_creation": {
            "default": "mean",
            "enum": [
              "single_frame",
              "mean"
            ],
            "type": "string"
          },
          "ref_frame": {
            "default": "0",
            "type": "string"
          }
        },
        "required": [
          "debug",
          "template_creation",
          "ref_frame"
        ]
      },
      "inputs": {
        "type": "object",
        "properties": {
          "api-key": {
            "type": "object"
          },
          "freesurfer_license_file": {
            "type": "object",
            "properties": {}
          },
          "input-file": {
            "type": "object",
            "properties": {
              "type": {
                "enum": [
                  "nifti"
                ]
              }
            }
          }
        },
        "required": [
          "api-key",
          "input-file"
        ]
      }
    },
    "required": [
      "config",
      "inputs"
    ]
  }
}
